@startuml
title Фильтрация задач по категории

actor "Пользователь" as User
participant "UI" as UI
participant "Контроллер" as Controller
participant "Сервис задач" as TaskService
database "База данных" as DB

User -> UI: Выбирает категорию\nв выпадающем списке
activate User
activate UI

UI -> Controller: GET /api/tasks?categoryId={categoryId}
deactivate UI
activate Controller

Controller -> TaskService: getTasksByCategory(categoryId)
activate TaskService

TaskService -> DB: SELECT t.*\nFROM Tasks t\nJOIN Task_Categories tc\n ON t.task_id = tc.task_id\nWHERE tc.category_id = categoryId
activate DB
DB --> TaskService: tasksList
deactivate DB

TaskService -> TaskService: formatTasksForDisplay(tasksList)

TaskService --> Controller: TasksListResponse(tasksList)
deactivate TaskService

Controller --> UI: 200 OK\n{tasks: [...]}
deactivate Controller

activate UI
UI -> UI: Очистить текущий список задач
UI -> UI: Показать только задачи\nвыбранной категории
UI --> User: Отображён отфильтрованный список задач
deactivate UI

deactivate User
@enduml
