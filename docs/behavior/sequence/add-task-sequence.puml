@startuml
title Добавление новой задачи

actor "Пользователь" as User
participant "UI" as UI
participant "Контроллер" as Controller
participant "Сервис задач" as TaskService
database "База данных" as DB

User -> UI: Вводит данные задачи\n(заголовок, описание, приоритет)
activate User
activate UI

UI -> Controller: POST /api/tasks\n{title, description, priority}
deactivate UI
activate Controller

Controller -> TaskService: createTask(taskData)
activate TaskService

TaskService -> TaskService: validateTaskData(taskData)

alt Данные корректны
    TaskService -> DB: INSERT INTO Tasks(...)
    activate DB
    DB --> TaskService: taskId
    deactivate DB

    TaskService --> Controller: Success(taskId)
    deactivate TaskService

    Controller --> UI: 201 Created\n{taskId}
    deactivate Controller

    activate UI
    UI -> UI: Обновить список задач
    UI --> User: Показать уведомление\n"Задача создана"
    deactivate UI
else Данные некорректны
    TaskService --> Controller: Error("Неверные данные")
    deactivate TaskService

    Controller --> UI: 400 Bad Request\n{error}
    deactivate Controller

    activate UI
    UI --> User: Показать ошибки валидации
    deactivate UI
end

deactivate User
@enduml
